# Default values for opensrp-web.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

replicaCount: 1

image:
  repository: opensrp/web
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: "latest"

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""

podAnnotations: {}

podSecurityContext: {}

securityContext: {}

service:
  type: ClusterIP
  port: 80

ingress:
  enabled: false
  annotations: {}
  hosts:
    - host: opensrp-web.local
      paths: []
  tls: []
resources: {}

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

# Recreates pods when configMap changes, default is true
recreatePodsWhenConfigMapChange: true

# populated the container environment variables
containerEnvironmentVariables:
  EXPRESS_OPENSRP_AUTHORIZATION_URL: "https://{{ .Values.shared_vars.keycloak_url }}/auth/realms/{{ .Values.shared_vars.keycloak_realm }}/protocol/openid-connect/auth"
  EXPRESS_OPENSRP_ACCESS_TOKEN_URL: "https://{{ .Values.shared_vars.keycloak_url }}/auth/realms/{{ .Values.shared_vars.keycloak_realm }}/protocol/openid-connect/token"
  EXPRESS_OPENSRP_CALLBACK_URL: "https://{{ .Values.shared_vars.app_domain_name }}/oauth/callback/OpenSRP/"
  EXPRESS_OPENSRP_USER_URL: "https://{{ .Values.shared_vars.opensrp_server  }}/opensrp/user-details/"
  EXPRESS_OPENSRP_CLIENT_ID: "{{ .Values.shared_vars.opensrp_client_id }}"
  EXPRESS_OPENSRP_CLIENT_SECRET: "{{ .Values.shared_vars.opensrp_client_secret }}"
  EXPRESS_SESSION_NAME: "{{ .Values.express.session_name }}"
  EXPRESS_OAUTH_GET_STATE_URL: "https://{{ .Values.shared_vars.app_domain_name }}/oauth/state"
  EXPRESS_SESSION_SECRET: "{{ .Values.express.session_secret }}"
  EXPRESS_FRONTEND_OPENSRP_CALLBACK_URL: "https://{{ .Values.shared_vars.app_domain_name }}/fe/oauth/callback/opensrp"
  EXPRESS_REACT_BUILD_PATH: "{{ .Values.express.react_build_path }}"
  NODE_ENV: "{{ .Values.express.node_env }}"
  EXPRESS_FRONTEND_LOGIN_URL: "{{ .Values.express.frontend_login_url }}"
  EXPRESS_OPENSRP_OAUTH_STATE: "{{ .Values.express.opensrp_oauth_state }}"
  EXPRESS_SESSION_PATH: "{{ .Values.express.session_path }}"
  EXPRESS_SESSION_LOGIN_URL: "{{ .Values.express.session_login_url }}"
  EXPRESS_SESSION_FILESTORE_PATH: "{{ .Values.express.frontend_logout_url }}"
  EXPRESS_FRONTEND_LOGOUT_URL: "{{ .Values.express.session_filestore_path }}"
  EXPRESS_PRELOADED_STATE_FILE: "{{ .Values.express.preloaded_state_file }}"

# populated the react app environment variables
reactEnvironmentVariables:
  REACT_APP_BACKEND_ACTIVE: "{{ .Values.front_end.app_backend_active }}"
  REACT_APP_DISABLE_LOGIN_PROTECTION: "{{ .Values.front_end.app_disable_login_protection }}"
  REACT_APP_DOMAIN_NAME: "https://{{ .Values.shared_vars.app_domain_name }}"
  REACT_APP_ENABLE_OPENSRP_OAUTH: "{{ .Values.front_end.app_enable_opensrp_oauth }}"
  REACT_APP_EXPRESS_OAUTH_GET_STATE_URL: "https://{{ .Values.shared_vars.app_domain_name }}/oauth/state"
  REACT_APP_EXPRESS_OAUTH_LOGOUT_URL: "https://{{ .Values.shared_vars.app_domain_name }}/logout"
  REACT_APP_KEYCLOAK_API_BASE_URL: "https://{{ .Values.shared_vars.keycloak_url }}/auth/admin/realms/{{ .Values.shared_vars.keycloak_realm }}"
  REACT_APP_KEYCLOAK_LOGOUT_URL: "https://{{ .Values.shared_vars.keycloak_url }}/auth/realms/{{ .Values.shared_vars.keycloak_realm }}/protocol/openid-connect/logout"
  REACT_APP_NAVBAR_BRAND_IMG_SRC: "{{ .Values.front_end.app_navbar_brand_img_src }}"
  REACT_APP_OPENSRP_ACCESS_TOKEN_URL: "https://{{ .Values.shared_vars.keycloak_url }}/auth/realms/{{ .Values.shared_vars.keycloak_realm }}/protocol/openid-connect/token"
  REACT_APP_OPENSRP_AUTHORIZATION_URL: "https://{{ .Values.shared_vars.keycloak_url }}/auth/realms/{{ .Values.shared_vars.keycloak_realm }}/protocol/openid-connect/auth"
  REACT_APP_OPENSRP_CLIENT_ID: "{{ .Values.shared_vars.opensrp_client_id }}"
  REACT_APP_OPENSRP_LOGOUT_URL: "https://{{ .Values.shared_vars.opensrp_server  }}/opensrp/logout.do"
  REACT_APP_OPENSRP_USER_URL: "https://{{ .Values.shared_vars.opensrp_server  }}/opensrp/user-details/"
  REACT_APP_WEBSITE_NAME: "{{ .Values.express.app_website_name }}"
  REACT_APP_ACTION_UUID_NAMESPACE: "{{ .Values.front_end.app_action_uuid_namespace }}"
  REACT_APP_PLAN_UUID_NAMESPACE: "{{ .Values.front_end.app_plan_uuid_namespace }}"
  REACT_APP_ENABLE_PRODUCT_CATALOGUE: "{{ .Values.front_end.app_enable_product_catalogue }}"
  REACT_APP_ENABLE_PLANS: "{{ .Values.front_end.app_enable_plans }}"
  REACT_APP_ENABLE_INVENTORY: "{{ .Values.front_end.app_enable_inventory }}"
  REACT_APP_ENABLE_LOCATIONS: "{{ .Values.front_end.app_enable_locations }}"
  REACT_APP_ENABLE_TEAMS: "{{ .Values.front_end.app_enable_teams }}"
  REACT_APP_ENABLE_CARD_SUPPORT: "{{ .Values.front_end.app_enable_card_support }}"
  REACT_APP_OPENSRP_API_BASE_URL: "https://{{ .Values.shared_vars.opensrp_server }}/opensrp/rest/"
  REACT_APP_DEFAULT_PLAN_DURATION_DAYS: "{{ .Values.front_end.app_default_plan_duration_days }}"
  REACT_APP_DEFAULT_ACTIVITY_DURATION_DAYS: "{{ .Values.front_end.app_default_activity_duration_days }}"
  REACT_APP_DATE_FORMAT: "{{ .Values.front_end.app_date_format }}"
  REACT_ENABLE_TEAMS_ASSIGNMENT_MODULE: "{{ .Values.front_end.app_enable_teams_assignment }}"
  REACT_APP_DEFAULT_PLAN_ID: "{{ .Values.front_end.app_default_plan_id }}"
  SKIP_PREFLIGHT_CHECK: "{{ .Values.front_end.skip_preflight_check }}"

shared_vars:
  keycloakUrl: "keycloak_url"
  app_domain_name: "app_domain_name"
  opensrp_client_id: "express_opensrp_client_id"
  opensrp_server: "opensrp_server"
  keycloak_realm: "keycloak_realm"

express:
  opensrp_user_url: "express_opensrp_user_url"
  opensrp_client_id: "express_opensrp_client_id"
  opensrp_client_secret: "express_opensrp_client_secret"
  session_name: "express_session_name"
  session_secret: "express_session_secret"
  opensrp_oauth_state: "opensrp"
  session_login_url: "/login"
  preloaded_state_file: "/tmp/opensrpState.json"
  session_filestore_path: "/tmp/express-sessions"
  frontend_login_url: "/fe/login"
  session_path: "/"
  react_build_path: "/usr/src/web"
  node_env: "development"
  frontend_logout_url: "/logout"

front_end:
  app_enable_product_catalogue: "false"
  app_enable_plans: "false"
  app_enable_inventory: "false"
  app_enable_locations: "false"
  app_enable_card_support: "false"
  app_enable_teams_assignment: "false"
  app_enable_teams: "false"
  skip_preflight_check: "true"
  app_website_name: "opensrp-web"
  app_backend_active: "true"
  app_disable_login_protection: "false"
  app_enable_opensrp_oauth: "true"
  app_action_uuid_namespace: "35968df5-f335-44ae-8ae5-25804caa2d86"
  app_plan_uuid_namespace: "85f7dbbf-07d0-4c92-aa2d-d50d141dde00"
  app_default_plan_id: "27362060-0309-411a-910c-64f55ede3758"
  app_default_plan_duration_days: 20
  app_default_activity_duration_days: 7
  app_date_format: "yyyy-mm-dd"
  app_navbar_brand_img_src: ""
